// src/lib/book-templates.ts
export interface BookTemplate {
    id: string;
    name: string;
    description: string;
    genre: string;
    targetWords: number;
    emoji: string;
    initialPrompt: string;
    aiSystemPrompt: string;
    suggestedStructure: string[];
  }
  
  export const bookTemplates: BookTemplate[] = [
    {
      id: 'novel-fiction',
      name: 'Roman de fiction',
      description: 'Roman narratif avec personnages et intrigue d√©velopp√©s',
      genre: 'Fiction',
      targetWords: 80000,
      emoji: 'üìñ',
      initialPrompt: "Je veux √©crire un roman de fiction. Peux-tu m'aider √† d√©velopper l'id√©e, les personnages principaux et l'intrigue ?",
      aiSystemPrompt: "Tu es un assistant d'√©criture sp√©cialis√© dans les romans de fiction. Aide l'auteur √† d√©velopper une intrigue captivante, des personnages tridimensionnels, et un style narratif engageant. Focus sur la structure narrative, le d√©veloppement des personnages, et la coh√©rence de l'univers.",
      suggestedStructure: [
        "D√©veloppement de l'id√©e principale",
        "Cr√©ation des personnages principaux", 
        "√âtablissement de l'univers/contexte",
        "Structure de l'intrigue (3 actes)",
        "√âcriture chapitre par chapitre",
        "R√©vision et peaufinage"
      ]
    },
    {
      id: 'short-story',
      name: 'Nouvelle',
      description: 'Histoire courte et percutante avec un point culminant fort',
      genre: 'Fiction courte',
      targetWords: 5000,
      emoji: 'üìù',
      initialPrompt: "Je souhaite √©crire une nouvelle. Aide-moi √† cr√©er une histoire courte mais impactante avec une chute m√©morable.",
      aiSystemPrompt: "Tu es expert en nouvelles et r√©cits courts. Aide √† cr√©er des histoires concises mais puissantes, avec un impact √©motionnel fort. Focus sur l'√©conomie de mots, la tension narrative, et une chute efficace.",
      suggestedStructure: [
        "Concept central de la nouvelle",
        "Personnage principal et conflit",
        "Mise en situation rapide",
        "D√©veloppement de la tension",
        "Climax et r√©solution",
        "Peaufinage du style"
      ]
    },
    {
      id: 'memoir',
      name: 'M√©moires/Autobiographie',
      description: 'R√©cit personnel de vie, exp√©riences marquantes',
      genre: 'Non-fiction',
      targetWords: 60000,
      emoji: 'üë§',
      initialPrompt: "Je veux √©crire mes m√©moires ou raconter une p√©riode importante de ma vie. Comment structurer ce r√©cit personnel ?",
      aiSystemPrompt: "Tu es sp√©cialis√© dans l'√©criture de m√©moires et r√©cits autobiographiques. Aide √† structurer les souvenirs, trouver les th√®mes r√©currents, et cr√©er un r√©cit personnel authentique et engageant.",
      suggestedStructure: [
        "P√©riode/th√®me principal √† raconter",
        "Chronologie des √©v√©nements cl√©s",
        "Personnages importants de cette p√©riode",
        "R√©flexions et apprentissages",
        "√âcriture des chapitres par p√©riode",
        "Ajout de perspectives actuelles"
      ]
    },
    {
      id: 'essay-book',
      name: 'Essai th√©matique',
      description: 'Exploration approfondie d\'un sujet, argumentation construite',
      genre: 'Essai',
      targetWords: 40000,
      emoji: 'ü§î',
      initialPrompt: "Je veux √©crire un essai approfondi sur un sujet qui me passionne. Comment d√©velopper mes id√©es de mani√®re structur√©e et convaincante ?",
      aiSystemPrompt: "Tu es expert en √©criture d'essais et textes argumentatifs. Aide √† structurer la pens√©e, d√©velopper des arguments solides, et pr√©senter des id√©es complexes de mani√®re claire et persuasive.",
      suggestedStructure: [
        "D√©finition du sujet et angle d'approche",
        "Recherche et collecte d'arguments",
        "Plan d√©taill√© de l'argumentation",
        "D√©veloppement chapitre par chapitre",
        "Exemples et illustrations",
        "Conclusion et synth√®se"
      ]
    },
    {
      id: 'self-help',
      name: 'D√©veloppement personnel',
      description: 'Guide pratique pour aider les lecteurs √† s\'am√©liorer',
      genre: 'D√©veloppement personnel',
      targetWords: 50000,
      emoji: 'üå±',
      initialPrompt: "Je veux √©crire un livre de d√©veloppement personnel pour aider les gens dans un domaine sp√©cifique. Comment cr√©er un guide pratique et inspirant ?",
      aiSystemPrompt: "Tu es sp√©cialis√© dans l'√©criture de livres de d√©veloppement personnel. Aide √† cr√©er du contenu pratique, inspirant et actionnable. Focus sur les exercices, les √©tapes concr√®tes, et la motivation du lecteur.",
      suggestedStructure: [
        "Identification du probl√®me √† r√©soudre",
        "M√©thode ou approche propos√©e",
        "√âtapes pratiques et exercices",
        "T√©moignages et exemples",
        "Plan d'action pour le lecteur",
        "Ressources compl√©mentaires"
      ]
    },
    {
      id: 'business-book',
      name: 'Livre business/entrepreneuriat',
      description: 'Partage d\'expertise professionnelle et conseils business',
      genre: 'Business',
      targetWords: 55000,
      emoji: 'üíº',
      initialPrompt: "Je veux partager mon expertise professionnelle dans un livre business. Comment transmettre mes connaissances de mani√®re utile pour d'autres entrepreneurs ?",
      aiSystemPrompt: "Tu es expert en √©criture de contenu business et entrepreneurial. Aide √† structurer l'expertise professionnelle, cr√©er des frameworks utiles, et partager des insights pratiques pour le monde des affaires.",
      suggestedStructure: [
        "Expertise et cr√©dibilit√© de l'auteur",
        "Probl√©matiques business abord√©es",
        "Frameworks et m√©thodologies",
        "√âtudes de cas et exemples concrets",
        "Outils et ressources pratiques",
        "Plan d'impl√©mentation"
      ]
    },
    {
      id: 'poetry-collection',
      name: 'Recueil de po√©sie',
      description: 'Collection de po√®mes autour d\'un th√®me ou d\'une √©motion',
      genre: 'Po√©sie',
      targetWords: 15000,
      emoji: 'üé≠',
      initialPrompt: "Je veux cr√©er un recueil de po√©sie. Aide-moi √† explorer un th√®me central et √† d√©velopper une voix po√©tique coh√©rente.",
      aiSystemPrompt: "Tu es un guide pour l'√©criture po√©tique. Aide √† explorer les √©motions, travailler les images et m√©taphores, et d√©velopper un style po√©tique personnel. Focus sur le rythme, la musicalit√© et l'expression artistique.",
      suggestedStructure: [
        "Th√®me central du recueil",
        "Exploration des √©motions et images",
        "Diff√©rents styles et formes po√©tiques",
        "Organisation th√©matique des po√®mes",
        "Travail sur le rythme et la sonorit√©",
        "Coh√©rence et progression du recueil"
      ]
    },
    {
      id: 'children-book',
      name: 'Livre pour enfants',
      description: 'Histoire adapt√©e aux jeunes lecteurs avec message positif',
      genre: 'Jeunesse',
      targetWords: 3000,
      emoji: 'üß∏',
      initialPrompt: "Je veux √©crire un livre pour enfants. Comment cr√©er une histoire captivante et √©ducative adapt√©e aux jeunes lecteurs ?",
      aiSystemPrompt: "Tu es sp√©cialis√© dans la litt√©rature jeunesse. Aide √† cr√©er des histoires adapt√©es √† l'√¢ge, avec des messages positifs, du vocabulaire appropri√©, et des situations que les enfants peuvent comprendre et appr√©cier.",
      suggestedStructure: [
        "√Çge cible et niveau de lecture",
        "Personnages attachants et relatable",
        "Message ou valeur √† transmettre",
        "Aventure ou conflit adapt√© √† l'√¢ge",
        "R√©solution positive et apprentissage",
        "√âl√©ments visuels et descriptions"
      ]
    },
    {
      id: 'travel-book',
      name: 'R√©cit de voyage',
      description: 'Carnet de voyage m√™lant d√©couvertes et r√©flexions personnelles',
      genre: 'R√©cit de voyage',
      targetWords: 45000,
      emoji: 'üó∫Ô∏è',
      initialPrompt: "Je veux √©crire un r√©cit de voyage bas√© sur mes exp√©riences. Comment m√©langer descriptions de lieux, rencontres, et r√©flexions personnelles ?",
      aiSystemPrompt: "Tu es expert en r√©cits de voyage. Aide √† transformer les exp√©riences de voyage en r√©cit captivant, m√™lant descriptions vivantes, rencontres humaines, et r√©flexions personnelles sur la d√©couverte.",
      suggestedStructure: [
        "Destination(s) et contexte du voyage",
        "Pr√©paratifs et attentes",
        "D√©couvertes et premi√®res impressions",
        "Rencontres et √©changes culturels",
        "D√©fis et apprentissages du voyage",
        "Retour et transformation personnelle"
      ]
    },
    {
      id: 'cookbook',
      name: 'Livre de cuisine',
      description: 'Collection de recettes avec histoire et conseils culinaires',
      genre: 'Gastronomie',
      targetWords: 35000,
      emoji: 'üë®‚Äçüç≥',
      initialPrompt: "Je veux cr√©er un livre de cuisine qui raconte l'histoire derri√®re mes recettes. Comment combiner recettes, techniques et r√©cits personnels ?",
      aiSystemPrompt: "Tu es sp√©cialis√© dans l'√©criture culinaire. Aide √† pr√©senter les recettes de mani√®re claire, raconter les histoires qui les accompagnent, et transmettre la passion pour la cuisine.",
      suggestedStructure: [
        "Philosophie culinaire et approche",
        "Recettes de base et techniques fondamentales",
        "Recettes par cat√©gorie ou saison",
        "Histoires et anecdotes culinaires",
        "Conseils et astuces de chef",
        "Menus et occasions sp√©ciales"
      ]
    },
    {
      id: 'mystery-thriller',
      name: 'Thriller/Polar',
      description: 'Roman √† suspense avec enqu√™te et r√©v√©lations progressives',
      genre: 'Thriller',
      targetWords: 75000,
      emoji: 'üîç',
      initialPrompt: "Je veux √©crire un thriller captivant avec une enqu√™te prenante. Comment construire le suspense et maintenir le lecteur en haleine ?",
      aiSystemPrompt: "Tu es expert en thrillers et romans policiers. Aide √† construire une intrigue solide, g√©rer les indices et fausses pistes, d√©velopper la tension, et cr√©er des r√©v√©lations impactantes.",
      suggestedStructure: [
        "Crime ou myst√®re central",
        "Protagoniste enqu√™teur",
        "Mise en place des indices",
        "D√©veloppement de l'enqu√™te",
        "Fausses pistes et r√©v√©lations",
        "Climax et r√©solution"
      ]
    },
    {
      id: 'fantasy-novel',
      name: 'Roman de fantasy',
      description: 'Univers fantastique avec magie, cr√©atures et aventures √©piques',
      genre: 'Fantasy',
      targetWords: 90000,
      emoji: 'üè∞',
      initialPrompt: "Je veux cr√©er un univers de fantasy avec magie et cr√©atures fantastiques. Comment construire un monde coh√©rent et une aventure √©pique ?",
      aiSystemPrompt: "Tu es sp√©cialis√© dans la fantasy et world-building. Aide √† cr√©er des univers fantastiques coh√©rents, d√©velopper des syst√®mes de magie, et construire des aventures √©piques avec des enjeux importants.",
      suggestedStructure: [
        "Monde fantastique et ses r√®gles",
        "Syst√®me de magie et cr√©atures",
        "H√©ros et sa qu√™te principale",
        "Alli√©s, ennemis et obstacles",
        "Aventures et d√©fis progressifs",
        "Bataille finale et r√©solution √©pique"
      ]
    }
  ];
  
  // Fonctions utilitaires pour les templates
  export const getTemplateById = (id: string): BookTemplate | undefined => {
    return bookTemplates.find(template => template.id === id);
  };
  
  export const getTemplatesByGenre = (genre: string): BookTemplate[] => {
    return bookTemplates.filter(template => template.genre === genre);
  };
  
  export const getAllGenres = (): string[] => {
    return [...new Set(bookTemplates.map(template => template.genre))];
  };
  
  // Configuration des prompts IA selon le template
  export const getAIPromptForTemplate = (templateId: string, userMessage: string): string => {
    const template = getTemplateById(templateId);
    if (!template) return userMessage;
  
    return `${template.aiSystemPrompt}\n\nMessage de l'utilisateur: ${userMessage}`;
  };
  
  // G√©n√©ration de suggestions contextuelles
  export const getContextualSuggestions = (templateId: string, wordCount: number): string[] => {
    const template = getTemplateById(templateId);
    if (!template) return [];
  
    const progress = wordCount / template.targetWords;
    
    if (progress < 0.1) {
      return [
        "D√©veloppons les personnages principaux",
        "Pr√©cisons le contexte et l'univers",
        "D√©finissons le conflit central"
      ];
    } else if (progress < 0.5) {
      return [
        "Approfondissons l'intrigue",
        "Ajoutons des obstacles et d√©fis",
        "D√©veloppons les relations entre personnages"
      ];
    } else if (progress < 0.8) {
      return [
        "Pr√©parons le climax",
        "Intensifions la tension",
        "Nouons les fils de l'intrigue"
      ];
    } else {
      return [
        "R√©glons les derniers d√©tails",
        "Pr√©parons la conclusion",
        "R√©visons les passages cl√©s"
      ];
    }
  };