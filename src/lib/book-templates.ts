// src/lib/book-templates.ts - Version 2.0 avec prompts complets
export interface BookTemplate {
  id: string;
  name: string;
  description: string;
  genre: string;
  targetWords: number;
  emoji: string;
  fullPrompt: string; // Prompt complet qui sera envoy√© automatiquement
  suggestedStructure: string[];
}

export const bookTemplates: BookTemplate[] = [
  {
    id: 'novel-fiction',
    name: 'Roman de fiction',
    description: 'Roman narratif avec personnages et intrigue d√©velopp√©s',
    genre: 'Fiction',
    targetWords: 80000,
    emoji: 'üìñ',
    fullPrompt: `Bonjour ! Je veux √©crire un roman de fiction et j'aimerais votre aide en tant qu'assistant d'√©criture sp√©cialis√©.

Voici ce que j'aimerais cr√©er :
- Un roman de fiction d'environ 80 000 mots
- Une histoire captivante avec des personnages d√©velopp√©s
- Une intrigue bien structur√©e

Pouvez-vous m'aider √† :
1. D√©velopper une id√©e centrale pour mon roman
2. Cr√©er des personnages principaux tridimensionnels
3. √âtablir l'univers et le contexte de l'histoire
4. Structurer l'intrigue en 3 actes
5. Planifier les chapitres

En tant qu'expert en romans de fiction, guidez-moi √©tape par √©tape. Commen√ßons par explorer quelques id√©es de base pour mon histoire. Que sugg√©rez-vous comme premi√®re √©tape ?`,
    suggestedStructure: [
      "D√©veloppement de l'id√©e principale",
      "Cr√©ation des personnages principaux", 
      "√âtablissement de l'univers/contexte",
      "Structure de l'intrigue (3 actes)",
      "√âcriture chapitre par chapitre",
      "R√©vision et peaufinage"
    ]
  },
  {
    id: 'short-story',
    name: 'Nouvelle',
    description: 'Histoire courte et percutante avec un point culminant fort',
    genre: 'Fiction courte',
    targetWords: 5000,
    emoji: 'üìù',
    fullPrompt: `Salut ! Je veux √©crire une nouvelle impactante d'environ 5000 mots et j'ai besoin de votre expertise.

Mon objectif :
- Cr√©er une histoire courte mais m√©morable
- Avoir un impact √©motionnel fort sur le lecteur
- Construire vers une chute ou r√©v√©lation marquante
- Ma√Ætriser l'art de l'√©conomie de mots

En tant que sp√©cialiste des nouvelles, aidez-moi √† :
1. Trouver un concept central puissant
2. Cr√©er un personnage principal attachant rapidement
3. √âtablir le conflit en quelques lignes
4. Construire la tension narrative
5. Pr√©parer une chute efficace

L'art de la nouvelle, c'est dire beaucoup avec peu. Comment commencer ? Avez-vous des techniques pour cr√©er un impact imm√©diat d√®s les premi√®res lignes ?`,
    suggestedStructure: [
      "Concept central de la nouvelle",
      "Personnage principal et conflit",
      "Mise en situation rapide",
      "D√©veloppement de la tension",
      "Climax et r√©solution",
      "Peaufinage du style"
    ]
  },
  {
    id: 'memoir',
    name: 'M√©moires/Autobiographie',
    description: 'R√©cit personnel de vie, exp√©riences marquantes',
    genre: 'Non-fiction',
    targetWords: 60000,
    emoji: 'üë§',
    fullPrompt: `Bonjour ! Je souhaite √©crire mes m√©moires ou raconter une p√©riode importante de ma vie dans un livre d'environ 60 000 mots.

Ce que je veux accomplir :
- Partager mon histoire personnelle de mani√®re authentique
- Transformer mes souvenirs en r√©cit captivant
- Transmettre mes apprentissages et r√©flexions
- Cr√©er un livre qui r√©sonne avec les lecteurs

J'ai besoin de votre aide pour :
1. Identifier la p√©riode ou le th√®me central √† raconter
2. Structurer chronologiquement mes souvenirs
3. Trouver le bon √©quilibre entre anecdotes et r√©flexions
4. Donner de la profondeur aux personnages de ma vie
5. Cr√©er une progression narrative m√™me dans du v√©cu

Comment fait-on pour transformer des souvenirs parfois fragment√©s en un r√©cit coh√©rent et engageant ? Par quoi commencer ?`,
    suggestedStructure: [
      "P√©riode/th√®me principal √† raconter",
      "Chronologie des √©v√©nements cl√©s",
      "Personnages importants de cette p√©riode",
      "R√©flexions et apprentissages",
      "√âcriture des chapitres par p√©riode",
      "Ajout de perspectives actuelles"
    ]
  },
  {
    id: 'self-help',
    name: 'D√©veloppement personnel',
    description: 'Guide pratique pour aider les lecteurs √† s\'am√©liorer',
    genre: 'D√©veloppement personnel',
    targetWords: 50000,
    emoji: 'üå±',
    fullPrompt: `Salut ! Je veux cr√©er un livre de d√©veloppement personnel d'environ 50 000 mots pour vraiment aider les gens √† transformer leur vie.

Mon objectif :
- Cr√©er un guide pratique et actionnable
- Inspirer et motiver les lecteurs
- Proposer des exercices concrets
- Partager des m√©thodes qui fonctionnent vraiment

Domaines d'expertise possibles : [confiance en soi, productivit√©, relations, carri√®re, bien-√™tre, habitudes, mindset, etc.]

Aidez-moi √† :
1. Identifier le probl√®me sp√©cifique que je veux r√©soudre
2. D√©velopper une m√©thode ou approche unique
3. Cr√©er des √©tapes pratiques et des exercices
4. Structurer le contenu de mani√®re progressive
5. Inclure des t√©moignages et exemples concrets

Un bon livre de d√©veloppement personnel change vraiment des vies. Comment puis-je m'assurer que le mien aura cet impact ? Commen√ßons par d√©finir le domaine o√π je veux aider les gens.`,
    suggestedStructure: [
      "Identification du probl√®me √† r√©soudre",
      "M√©thode ou approche propos√©e",
      "√âtapes pratiques et exercices",
      "T√©moignages et exemples",
      "Plan d'action pour le lecteur",
      "Ressources compl√©mentaires"
    ]
  },
  {
    id: 'business-book',
    name: 'Livre business/entrepreneuriat',
    description: 'Partage d\'expertise professionnelle et conseils business',
    genre: 'Business',
    targetWords: 55000,
    emoji: 'üíº',
    fullPrompt: `Bonjour ! Je veux partager mon expertise professionnelle dans un livre business d'environ 55 000 mots qui apportera une vraie valeur aux entrepreneurs et professionnels.

Mon objectif :
- Transmettre mes connaissances et exp√©rience terrain
- Cr√©er des frameworks pratiques et r√©utilisables
- Aider d'autres entrepreneurs √† √©viter mes erreurs
- √âtablir ma cr√©dibilit√© dans mon domaine

Domaines possibles : [marketing, vente, management, finance, startups, transformation digitale, leadership, etc.]

J'ai besoin de votre aide pour :
1. Structurer mon expertise en contenu actionnable
2. Cr√©er des m√©thodologies claires et applicables
3. Int√©grer des √©tudes de cas et exemples concrets
4. D√©velopper des outils pratiques pour les lecteurs
5. Rendre le contenu accessible sans simplifier √† l'exc√®s

Un bon livre business doit √©quilibrer th√©orie, pratique et storytelling. Comment transformer mon exp√©rience en valeur pour d'autres entrepreneurs ? Commen√ßons par identifier mon domaine d'expertise unique.`,
    suggestedStructure: [
      "Expertise et cr√©dibilit√© de l'auteur",
      "Probl√©matiques business abord√©es",
      "Frameworks et m√©thodologies",
      "√âtudes de cas et exemples concrets",
      "Outils et ressources pratiques",
      "Plan d'impl√©mentation"
    ]
  },
  {
    id: 'mystery-thriller',
    name: 'Thriller/Polar',
    description: 'Roman √† suspense avec enqu√™te et r√©v√©lations progressives',
    genre: 'Thriller',
    targetWords: 75000,
    emoji: 'üîç',
    fullPrompt: `Salut ! Je veux √©crire un thriller captivant d'environ 75 000 mots qui tiendra les lecteurs en haleine du d√©but √† la fin.

Mon ambition :
- Cr√©er une intrigue solide et cr√©dible
- Maintenir le suspense √† chaque chapitre
- D√©velopper un enqu√™teur/protagoniste m√©morable
- Ma√Ætriser l'art des indices et fausses pistes
- Construire vers un climax explosif

Types possibles : [polar urbain, thriller psychologique, enqu√™te criminelle, suspense paranormal, etc.]

Aidez-moi √† :
1. Cr√©er le crime ou myst√®re central de l'histoire
2. D√©velopper mon protagoniste enqu√™teur
3. Construire un syst√®me d'indices coh√©rent
4. G√©rer les r√©v√©lations et plot twists
5. Maintenir la tension narrative constante

L'art du thriller, c'est de garder le lecteur sur le fil du rasoir. Comment cr√©er cette tension addictive ? Commen√ßons par le myst√®re central - avez-vous des id√©es pour un crime intriguant ?`,
    suggestedStructure: [
      "Crime ou myst√®re central",
      "Protagoniste enqu√™teur",
      "Mise en place des indices",
      "D√©veloppement de l'enqu√™te",
      "Fausses pistes et r√©v√©lations",
      "Climax et r√©solution"
    ]
  },
  {
    id: 'fantasy-novel',
    name: 'Roman de fantasy',
    description: 'Univers fantastique avec magie, cr√©atures et aventures √©piques',
    genre: 'Fantasy',
    targetWords: 90000,
    emoji: 'üè∞',
    fullPrompt: `Bonjour ! Je r√™ve de cr√©er un univers de fantasy √©pique d'environ 90 000 mots avec un monde riche, de la magie, et une aventure inoubliable.

Ma vision :
- Construire un monde fantastique coh√©rent et immersif
- Cr√©er un syst√®me de magie original et logique
- D√©velopper des personnages h√©ro√Øques attachants
- Raconter une qu√™te √©pique avec de vrais enjeux
- Int√©grer cr√©atures mystiques et civilisations fantastiques

Sous-genres possibles : [high fantasy, urban fantasy, dark fantasy, fantasy √©pique, etc.]

J'ai besoin de votre expertise pour :
1. Construire les r√®gles et g√©ographie de mon monde
2. D√©velopper un syst√®me de magie coh√©rent
3. Cr√©er le h√©ros et sa qu√™te principale
4. Concevoir les antagonistes et obstacles
5. √âquilibrer action, d√©veloppement de personnages et world-building

La fantasy permet tout, mais paradoxalement demande beaucoup de coh√©rence. Comment cr√©er un monde √† la fois original et cr√©dible ? Commen√ßons par l'univers - quel type de monde fantasy m'inspire ?`,
    suggestedStructure: [
      "Monde fantastique et ses r√®gles",
      "Syst√®me de magie et cr√©atures",
      "H√©ros et sa qu√™te principale",
      "Alli√©s, ennemis et obstacles",
      "Aventures et d√©fis progressifs",
      "Bataille finale et r√©solution √©pique"
    ]
  },
  {
    id: 'children-book',
    name: 'Livre pour enfants',
    description: 'Histoire adapt√©e aux jeunes lecteurs avec message positif',
    genre: 'Jeunesse',
    targetWords: 3000,
    emoji: 'üß∏',
    fullPrompt: `Salut ! Je veux cr√©er un livre pour enfants d'environ 3000 mots qui va les captiver tout en leur transmettant de belles valeurs.

Mon objectif :
- Raconter une histoire que les enfants adorent
- Transmettre des valeurs positives naturellement
- Utiliser un vocabulaire adapt√© √† l'√¢ge
- Cr√©er des personnages attachants et relatable
- Stimuler l'imagination et la cr√©ativit√©

Tranches d'√¢ge possibles : [3-5 ans, 6-8 ans, 9-12 ans]
Th√®mes possibles : [amiti√©, courage, diff√©rence, famille, environnement, confiance en soi, etc.]

Aidez-moi √† :
1. Choisir la tranche d'√¢ge et adapter le style
2. Cr√©er des personnages que les enfants aiment
3. D√©velopper une histoire simple mais engageante
4. Int√©grer le message √©ducatif avec subtilit√©
5. Pr√©voir les descriptions pour les illustrations

Les enfants sont un public exigeant - ils sentent tout de suite si c'est authentique. Comment cr√©er une histoire qui les transporte vraiment ? Commen√ßons par d√©finir l'√¢ge des lecteurs et le message que je veux transmettre.`,
    suggestedStructure: [
      "√Çge cible et niveau de lecture",
      "Personnages attachants et relatable",
      "Message ou valeur √† transmettre",
      "Aventure ou conflit adapt√© √† l'√¢ge",
      "R√©solution positive et apprentissage",
      "√âl√©ments visuels et descriptions"
    ]
  },
  {
    id: 'travel-book',
    name: 'R√©cit de voyage',
    description: 'Carnet de voyage m√™lant d√©couvertes et r√©flexions personnelles',
    genre: 'R√©cit de voyage',
    targetWords: 45000,
    emoji: 'üó∫Ô∏è',
    fullPrompt: `Bonjour ! Je veux transformer mes exp√©riences de voyage en un r√©cit captivant d'environ 45 000 mots qui fera voyager les lecteurs depuis leur salon.

Ma vision :
- Partager mes d√©couvertes et aventures authentiquement  
- M√©langer descriptions vivantes et r√©flexions personnelles
- Transmettre la magie des rencontres culturelles
- Inspirer d'autres √† voyager ou voir le monde diff√©remment
- Cr√©er un livre qu'on a envie de d√©vorer

Destinations possibles : [pays sp√©cifique, tour du monde, p√®lerinage, voyage int√©rieur, exploration urbaine, etc.]

Votre aide me sera pr√©cieuse pour :
1. Structurer mes souvenirs de voyage en r√©cit coh√©rent
2. √âquilibrer anecdotes, descriptions et r√©flexions
3. Donner vie aux lieux et aux rencontres
4. Transmettre l'√©motion et la transformation personnelle
5. Cr√©er un fil conducteur au-del√† de la chronologie

Un bon r√©cit de voyage ne raconte pas juste "ce qui s'est pass√©" mais transforme le lecteur. Comment faire vivre mes aventures sur papier ? Commen√ßons par le voyage qui m'a le plus marqu√©.`,
    suggestedStructure: [
      "Destination(s) et contexte du voyage",
      "Pr√©paratifs et attentes",
      "D√©couvertes et premi√®res impressions",
      "Rencontres et √©changes culturels",
      "D√©fis et apprentissages du voyage",
      "Retour et transformation personnelle"
    ]
  },
  {
    id: 'cookbook',
    name: 'Livre de cuisine',
    description: 'Collection de recettes avec histoire et conseils culinaires',
    genre: 'Gastronomie',
    targetWords: 35000,
    emoji: 'üë®‚Äçüç≥',
    fullPrompt: `Salut ! Je veux cr√©er un livre de cuisine d'environ 35 000 mots qui ne soit pas qu'un simple recueil de recettes, mais qui raconte une histoire culinaire.

Mon approche :
- Partager mes recettes favorites avec leur histoire
- Transmettre ma passion pour la cuisine
- Donner des conseils pratiques et astuces de chef
- Cr√©er un livre qu'on lit autant qu'on utilise
- M√©langer technique culinaire et storytelling

Styles possibles : [cuisine familiale, cuisine du monde, p√¢tisserie, cuisine healthy, street food, cuisine de saison, etc.]

J'aimerais votre aide pour :
1. D√©finir mon style culinaire et philosophie
2. Structurer les recettes par th√®mes coh√©rents
3. Raconter l'histoire derri√®re chaque plat
4. Int√©grer conseils techniques et astuces
5. Cr√©er des menus et associations de saveurs

Un livre de cuisine r√©ussi donne envie de cuisiner ET de lire. Comment transformer mes recettes en exp√©rience compl√®te ? Commen√ßons par identifier ma signature culinaire unique.`,
    suggestedStructure: [
      "Philosophie culinaire et approche",
      "Recettes de base et techniques fondamentales",
      "Recettes par cat√©gorie ou saison",
      "Histoires et anecdotes culinaires",
      "Conseils et astuces de chef",
      "Menus et occasions sp√©ciales"
    ]
  },
  {
    id: 'poetry-collection',
    name: 'Recueil de po√©sie',
    description: 'Collection de po√®mes autour d\'un th√®me ou d\'une √©motion',
    genre: 'Po√©sie',
    targetWords: 15000,
    emoji: 'üé≠',
    fullPrompt: `Bonjour ! Je ressens le besoin de cr√©er un recueil de po√©sie d'environ 15 000 mots qui touchera les √¢mes et explorera les profondeurs de l'√©motion humaine.

Ma vision po√©tique :
- Explorer un th√®me central qui me passionne
- Cr√©er une progression √©motionnelle dans le recueil
- D√©velopper ma voix po√©tique unique
- Jouer avec les formes, rythmes et sonorit√©s
- Toucher les lecteurs au c≈ìur

Th√®mes possibles : [amour, perte, nature, identit√©, soci√©t√©, spiritualit√©, transformation, m√©moire, etc.]
Styles possibles : [vers libre, sonnets, ha√Økus, prose po√©tique, slam, etc.]

Aidez-moi √† :
1. Identifier le th√®me central f√©d√©rateur
2. Explorer les √©motions et images associ√©es
3. Exp√©rimenter diff√©rentes formes po√©tiques
4. Organiser les po√®mes en progression coh√©rente
5. Affiner le rythme et la musicalit√©

La po√©sie, c'est l'art de dire l'ineffable avec pr√©cision. Comment transformer mes √©motions en vers qui r√©sonnent universellement ? Explorons ensemble le th√®me qui me hante et demande √† s'exprimer.`,
    suggestedStructure: [
      "Th√®me central du recueil",
      "Exploration des √©motions et images",
      "Diff√©rents styles et formes po√©tiques",
      "Organisation th√©matique des po√®mes",
      "Travail sur le rythme et la sonorit√©",
      "Coh√©rence et progression du recueil"
    ]
  },
  {
    id: 'essay-book',
    name: 'Essai th√©matique',
    description: 'Exploration approfondie d\'un sujet, argumentation construite',
    genre: 'Essai',
    targetWords: 40000,
    emoji: 'ü§î',
    fullPrompt: `Bonjour ! Je veux √©crire un essai approfondi d'environ 40 000 mots sur un sujet qui me passionne et qui m√©rite d'√™tre explor√© avec rigueur et cr√©ativit√©.

Mon ambition :
- Apporter un √©clairage nouveau sur un sujet important
- D√©velopper une argumentation solide et nuanc√©e
- M√©langer r√©flexion personnelle et recherche approfondie
- Rendre accessible des id√©es complexes
- Contribuer au d√©bat intellectuel contemporain

Sujets possibles : [soci√©t√©, technologie, philosophie, art, politique, environnement, psychologie, futur, etc.]

Votre expertise m'aiderait √† :
1. D√©finir pr√©cis√©ment mon sujet et angle d'approche
2. Structurer ma r√©flexion de mani√®re convaincante
3. √âquilibrer arguments rationnels et touches personnelles
4. Int√©grer exemples concrets et r√©f√©rences pertinentes
5. D√©velopper un style d'√©criture engageant

Un bon essai ne donne pas juste des r√©ponses, il pose les bonnes questions. Comment transformer ma passion pour un sujet en contribution intellectuelle significative ? Explorons le sujet qui m'anime vraiment.`,
    suggestedStructure: [
      "D√©finition du sujet et angle d'approche",
      "Recherche et collecte d'arguments",
      "Plan d√©taill√© de l'argumentation",
      "D√©veloppement chapitre par chapitre",
      "Exemples et illustrations",
      "Conclusion et synth√®se"
    ]
  }
];

// Fonctions utilitaires mises √† jour
export const getTemplateById = (id: string): BookTemplate | undefined => {
  return bookTemplates.find(template => template.id === id);
};

export const getTemplatesByGenre = (genre: string): BookTemplate[] => {
  return bookTemplates.filter(template => template.genre === genre);
};

export const getAllGenres = (): string[] => {
  return [...new Set(bookTemplates.map(template => template.genre))];
};

// Fonction pour envoyer le prompt initial d'un template
export const sendTemplateInitialPrompt = async (
  templateId: string, 
  bookId: string, 
  userId: string,
  webhookFunction: (bookId: string, message: string, userId: string) => Promise<void>
) => {
  const template = getTemplateById(templateId);
  if (!template) {
    throw new Error(`Template ${templateId} not found`);
  }

  // Envoyer le prompt complet
  await webhookFunction(bookId, template.fullPrompt, userId);
  
  return template;
};